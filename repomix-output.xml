This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.github/
  workflows/
    ci.yml
articles/
  waistcoat-stitch.md
components/
  gallery-detail-card.html
  head.html
  header.html
  nest-filter-bar.html
  tool-detail-card.html
css/
  about.css
  blog.css
  colors.css
  contact-form.css
  gallery-details-card.css
  gallery-styles.css
  header.css
  nest-filter.css
  styles.css
  tool-detail-card.css
  tools.css
data/
  articles.json
  gallery.json
  tools.json
images/
  featured-project-shawl.jpg
  flower-mandala-earrings.jpg
  gallery-project-basket.jpg
  hyperbolic-coral-charm.jpg
  magpie-yarn.png
  tym-logo.png
js/
  loadBlogList.js
  loadBlogPost.js
  loadGallery.js
  loadHead.js
  loadHeader.js
  loadTools.js
  pillarFilter.js
  utils.js
misc/
  BLOGPOST_PIPELINE.md
  improvements-checklist.md
pages/
  about.html
  blog-post.html
  blog.html
  contact-form.html
  gallery.html
  tools.html
.gitignore
data-deletion.html
index.html
package.json
pre-pr-check.sh
README.md
start-ci.sh
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="README.md">
## Hi there üëã

<!--
**TheYarnMagpie/TheYarnMagpie** is a ‚ú® _special_ ‚ú® repository because its `README.md` (this file) appears on your GitHub profile.

Here are some ideas to get you started:

- üî≠ I‚Äôm currently working on ...
- üå± I‚Äôm currently learning ...
- üëØ I‚Äôm looking to collaborate on ...
- ü§î I‚Äôm looking for help with ...
- üí¨ Ask me about ...
- üì´ How to reach me: ...
- üòÑ Pronouns: ...
- ‚ö° Fun fact: ...
-->
</file>

<file path="articles/waistcoat-stitch.md">
# Mastering the Waistcoat Stitch

The **Waistcoat Stitch** (also known as the Knit Stitch) is one of my favorite techniques for creating a sturdy, "knit-look" fabric using only a crochet hook. 

### Why use this stitch?
* **Strength:** It creates a very dense fabric, perfect for baskets.
* **Aesthetics:** It looks almost identical to the "V" in knitting.
* **Warmth:** Great for hats and thick sweaters.

### Pro-Tip
Keep your tension **loose**. Because you are inserting the hook into the "V" of the stitch below rather than the top loops, it can get tight very quickly!
</file>

<file path="components/nest-filter-bar.html">
<div class="nest-filter-wrapper">
  <button class="nest-filter-btn active" data-pillar="all">All Nests</button>
  <button class="nest-filter-btn" data-pillar="Maker's Studio">The Maker's Studio</button>
  <button class="nest-filter-btn" data-pillar="Strategist's Loom">The Strategist's Loom</button>
  <button class="nest-filter-btn" data-pillar="Collector's Vault">The Collector's Vault</button>
</div>
</file>

<file path="components/tool-detail-card.html">
<div id="toolDetailOverlay" class="details-overlay">
    <div class="tool-detail-card">
        <button id="closeToolDetailBtn" class="close-detail">&times;</button>
        
        <span id="toolDetailPillar"></span>
        <h2 id="toolDetailTitle"></h2>
        <p id="toolDetailDescription"></p>
        <div id="toolDetailLongDescription"></div>
    </div>
</div>
</file>

<file path="css/about.css">

</file>

<file path="css/colors.css">
:root {
  --feather-black: #2C2C2E;
  --coal-dust: #3E3E41;
  --mid-feather-grey: #B2B2B5;
  --downy-grey: #DADADD;
  --feather-white: #F5F5F5;
  --wing-blue: #4682B4;
  --tail-green: #3C9D88;
  --copper-gleam: #B86F50;
  --violet-sheen: #7A5CA0;
  --sheen-gold: #C8A146;
}
</file>

<file path="css/nest-filter.css">
/* css/nest-filter.css */
.nest-filter-wrapper {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin: 20px 0 40px 0;
    flex-wrap: wrap;
}

.nest-filter-btn {
    background: var(--feather-white);
    border: 1px solid var(--downy-grey);
    padding: 10px 22px;
    border-radius: 30px;
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--coal-dust);
    cursor: pointer;
    transition: all 0.3s ease;
}

.nest-filter-btn:hover {
    border-color: var(--tail-green);
    color: var(--tail-green);
}

.nest-filter-btn.active {
    background: var(--tail-green);
    color: white;
    border-color: var(--tail-green);
    box-shadow: 0 4px 10px rgba(18, 94, 78, 0.2);
}
</file>

<file path="css/tool-detail-card.css">
/* css/tool-detail-card.css */

/* 1. The Full-Screen Overlay */
#toolDetailOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85); /* Darker for better focus */
    backdrop-filter: blur(4px);    /* Modern glass effect */
    display: none;                 /* Managed by .active */
    justify-content: center;
    align-items: center;
    z-index: 10000;                /* Above everything */
}

#toolDetailOverlay.active {
    display: flex;
}

/* 2. The Card Itself */
.tool-detail-card {
    background: var(--feather-white);
    padding: 2.5rem;
    border-radius: 20px;
    position: relative;
    max-width: 500px;
    width: 90%;
    color: var(--feather-black);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    text-align: left;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* 3. The Close Button */
.close-detail {
    position: absolute;
    top: 15px;
    right: 20px;
    background: none;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    color: var(--coal-dust);
    line-height: 1;
}

/* 4. The Nest Tag (Pillar) */
#toolDetailPillar {
    display: inline-block;
    background: var(--tail-green);
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    width: fit-content;
}

/* 5. Typography */
#toolDetailTitle {
    margin: 0;
    font-size: 1.8rem;
    font-weight: 700;
}

#toolDetailDescription {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--coal-dust);
}

#toolDetailLongDescription {
    font-size: 0.9rem;
    color: var(--coal-dust);
    border-top: 1px solid var(--downy-grey);
    padding-top: 1rem;
    margin-top: 0.5rem;
}
</file>

<file path="js/pillarFilter.js">
/* js/pillarFilter.js */

/**
 * Initializes the Pillar filtering logic.
 * @param {string} containerId - The ID of the grid/list container (e.g., 'gallery-container')
 * @param {string} cardClass - The class name of the individual cards (e.g., 'tool-card')
 */

async function initPillarFilters(containerId, cardClass) {
    const filterPlaceholder = document.getElementById('pillar-filter-placeholder');
    if (!filterPlaceholder) return;

    try {
        const res = await fetch('../components/nest-filter-bar.html');
        if (!res.ok) throw new Error("Filter component not found");
        const html = await res.text();
        filterPlaceholder.innerHTML = html;

        const buttons = document.querySelectorAll('.nest-filter-btn');
        const cards = document.getElementsByClassName(cardClass);

        buttons.forEach(btn => {
            btn.addEventListener('click', () => {
                const selectedPillar = btn.getAttribute('data-pillar').toLowerCase();

                buttons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                Array.from(cards).forEach(card => {
                    const tag = card.querySelector('.nest-tag, .blog-pillar-tag');
                    // Get text, lowercase it, and remove "The " for easier matching
                    const nestText = tag ? tag.textContent.trim().toLowerCase().replace('the ', '') : "";
                    const compareValue = selectedPillar.replace('the ', '');

                    if (selectedPillar === 'all' || nestText.includes(compareValue) || compareValue.includes(nestText)) {
                        card.style.display = ''; 
                        card.style.opacity = '1';
                    } else {
                        card.style.display = 'none';
                        card.style.opacity = '0';
                    }
                });
            });
        });
    } catch (err) {
        console.error("Pillar Filter Error:", err);
    }
}
</file>

<file path="js/utils.js">
// js/utils.js
// Utility to get the correct path prefix based on current location
const getPathPrefix = () => window.location.pathname.includes('/pages/') ? '../' : '';

/**
 * Enhanced fetch wrapper to prevent "URL not provided" errors
 */
async function safeFetch(relativeRootPath) {
    const fullPath = getPathPrefix() + relativeRootPath;
    const response = await fetch(fullPath);
    if (!response.ok) throw new Error(`Could not fetch ${fullPath}: ${response.status}`);
    return response;
}
</file>

<file path="misc/BLOGPOST_PIPELINE.md">
# **üìö TheYarnMagpie: Post Creation Pipeline**

This document outlines the 3-step process for adding new content to the Blog section.

## **Step 1: Create the Markdown Content**
Create a new .md file in the /articles/ folder. Use a URL-friendly name (lowercase, no spaces, use hyphens).

**Template (/articles/your-file-name.md):**
# Your Catchy Title Here

Introductory paragraph that hooks the reader.

### Subheading (Use ### for smaller titles)
* **Bold point:** Use double asterisks for emphasis.
* List item 1
* List item 2

> Use the "greater than" symbol for a nice blockquote/tip box.

Final closing thoughts.


## **Step 2: Register in the Data File**
The website won't know the file exists until you "register" it. Open data/articles.json and add a new entry to the top of the list.

**Entry Template:**
{
"id": "your-unique-url-id",
"title": "Display Title of the Post",
"summary": "A short 1-2 sentence preview that shows on the list cards.",
"pillar": "The Maker's Studio",
"date": "2026-02-07",
"image": "../images/your-image.jpg",
"file": "../articles/your-file-name.md"
}


### **Pillar Options (Must match exactly):**
The Collector's Vault (Triggers Slate border & Shop CTA)
The Maker's Studio (Triggers Peach border & Pattern CTA)
The Strategist's Loom (Triggers Sage border & Blueprint CTA)

## **Step 3: Technical Reference (The "Under the Hood")**
To maintain the system, here is how the parts connect:
Component Responsibility
pages/blog.html The "Hub" ‚Äì shows all articles in a list.
pages/blog-post.html The "Reader" ‚Äì the blank template for every article.
js/loadBlogList.js Fetches articles.json to build the preview cards.
js/loadBlogPost.js Reads the ?id= in the URL, parses Markdown, and injects the CTA.
css/blog.css Handles all colors, card shapes, and text visibility (!important rules).

## ‚úÖ Pre-Flight Checklist
**Images:** Are your images saved in /images/? (Remember to use ../images/ in the JSON).
**IDs:** Is the id in the JSON the same as what you want in the URL?
**Pillars:** Did you double-check the spelling of the Pillar name? (Case sensitive!)
**Target:** The system is set to target="_blank", so it will always open in a new tab.

## üñºÔ∏è Step 4: Handling Images
1. ### **Featured Images (The Card Image)**
The image that appears on the main Blog list page is defined in articles.json.
Pathing: Use ../images/filename.jpg because the blog.html page is inside the /pages/ folder and needs to step "out" to find the images folder.
Ratio: Aim for horizontal (landscape) images for the best rectangular card look.

2. ### **Images Inside the Article (Markdown)**
To add images within the text of your post, use the standard Markdown syntax inside your .md file.
Format:
![Alternative Text Description](path/to/image.jpg)

### **‚ö†Ô∏è Critical Pathing Note:**
When the browser renders your blog post, it is technically "standing" inside pages/blog-post.html. Therefore, the image path inside your Markdown must be relative to the pages folder, not the articles folder.
Correct: ![My Crochet Basket](../images/basket.jpg)
Incorrect: ![My Crochet Basket](./images/basket.jpg)

3. ### **Image "Pro-Tip": Captions**
If you want to add a caption under an image, use an italicized line directly below the image in your Markdown file:
![Stitch Detail](../images/stitch-close-up.jpg)
*Close-up of the V-shape in the Waistcoat stitch.*

### **Summary Checklist for Images:**
1. Upload your image to the /images/ folder.
2. Reference it in articles.json for the preview card using ../images/.
3. Reference it in the .md file for the body content using ../images/.
</file>

<file path="pages/blog-post.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Blog | TheYarnMagpie</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <script src="../js/loadHead.js"></script>

    <link rel="stylesheet" href="../css/blog.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <main>
      <a href="blog.html" style="color: #666; text-decoration: none; font-size: 0.9rem;">‚Üê Back to Blog</a>
      
        <article id="post-content" class="blog-article-container">
            <h1 id="article-title">Loading...</h1>
            <div id="article-body"></div>
            <div id="dynamic-cta-container"></div>
        </article>
    </main>
    <script src="../js/loadHeader.js"></script>
    <script src="../js/loadBlogPost.js"></script>
</body>
</html>
</file>

<file path=".gitignore">
# Dependencies
node_modules/

# Build output (future-proof)
dist/
.cache/

# OS junk
.DS_Store

# Environment variables
.env
</file>

<file path="data-deletion.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>User Data Deletion Request ‚Äì The Yarn Magpie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; line-height: 1.6; padding: 2rem; max-width: 700px; margin: auto; }
    h1 { color: #333; }
    a { color: #0366d6; }
    small { color: #666; }
  </style>
</head>
<body>
  <h1>Request to Delete Your Data</h1>
  <p>
    In compliance with Facebook Platform Policies and data protection regulations,
    users of <strong>The Yarn Magpie</strong> application may request deletion of
    their data obtained through Facebook or Instagram integrations.
  </p>

  <p>To delete your data, please follow one of the options below:</p>

  <ol>
    <li>
      Go to your Facebook account settings ‚Üí <strong>Settings &amp; Privacy ‚Üí Apps and Websites</strong>,
      locate <em>The Yarn Magpie</em>, and remove its access.  
      This will automatically delete the permissions granted to the app.
    </li>
    <li>
      Alternatively, you can send an email to
      <a href="mailto:theyarnmagpie.crochet@gmail.com">theyarnmagpie.crochet@gmail.com</a>
      with the subject line <strong>Data Deletion Request</strong> and include your
      Facebook or Instagram username. We will process your request within 30 days.
    </li>
    <li>
      You may also contact us through our
      <a href="https://theyarnmagpie.github.io/contact">contact form</a>
      and mention that your message concerns data deletion.
    </li>
  </ol>

  <p>
    Once your request has been processed, you will receive a confirmation email
    that your data has been permanently deleted.
  </p>

  <small>Last updated: November 2025</small>
</body>
</html>
</file>

<file path="package.json">
{
  "name": "theyarnmagpie",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "check": "bash pre-pr-check.sh",
    "dev": "live-server . --port=8080 --no-browser",
    "test": "echo \"No tests yet\""
  },
  "devDependencies": {
    "live-server": "^1.2.2"
  }
}
</file>

<file path="pre-pr-check.sh">
#!/usr/bin/env bash
set -e

echo "üîç Pre-PR sanity check starting..."
echo

# 1. Check package.json is valid JSON
echo "1Ô∏è‚É£ Checking package.json JSON validity..."
node -e "JSON.parse(require('fs').readFileSync('package.json','utf8'))"
echo "‚úÖ package.json is valid JSON"
echo

# 2. Check npm can read package.json
echo "2Ô∏è‚É£ Checking npm can read package.json..."
npm pkg get name version >/dev/null
echo "‚úÖ npm can read package.json"
echo

# 3. Validate package-lock.json consistency
echo "3Ô∏è‚É£ Validating package-lock.json consistency..."
npm install --package-lock-only --ignore-scripts >/dev/null
echo "‚úÖ package-lock.json is valid & in sync"
echo

# 4. Optional full install check (best effort)
echo "4Ô∏è‚É£ Optional npm ci check (may fail on Android shared storage)..."
if npm ci >/dev/null 2>&1; then
  echo "‚úÖ npm ci succeeded"
else
  echo "‚ö†Ô∏è npm ci failed ‚Äî likely Android symlink/storage issue"
  echo "‚ÑπÔ∏è This does NOT necessarily mean your files are invalid"
fi

echo
echo "üéâ Pre-PR checks completed"
</file>

<file path="start-ci.sh">
#!/usr/bin/env bash
set -euo pipefail

# Start dev server in background (logs to dev.log)
npm run dev &> dev.log &
PID=$!
trap 'kill $PID 2>/dev/null || true' EXIT

# Wait up to 30s for server to respond
for i in $(seq 1 30); do
  if curl -sSf http://127.0.0.1:8080 >/dev/null 2>&1; then
    echo "Server ready"
    break
  fi
  sleep 1
done

# Run a smoke request
if curl -sSf http://127.0.0.1:8080 >/dev/null 2>&1; then
  echo "Smoke test passed"
else
  echo "Smoke test failed ‚Äî check dev.log for details"
  cat dev.log || true
  exit 1
fi
</file>

<file path=".github/workflows/ci.yml">

</file>

<file path="css/blog.css">
/* --- BLOG LIST VIEW --- */
#blog-list-container {
  max-width: 900px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 30px;
  padding: 20px;
}

.blog-card {
  display: flex;
  background: #f9f9f9 !important;
  /* Force light background */
  border: 1px solid #ddd;
  border-radius: 12px;
  overflow: hidden;
  text-decoration: none;
  transition: transform 0.2s ease;
  height: 200px;
}

/* FORCE TEXT COLORS TO BE VISIBLE */
.blog-card-content h3 {
  color: #222 !important;
  /* Dark charcoal */
  margin: 0 0 10px 0;
}

.blog-card-content p {
  color: #444 !important;
  /* Dark grey */
  font-size: 0.95rem;
}

.blog-pillar-tag {
  display: inline-block;
  background-color: var(--tail-green) !important;
  /* Brand alignment */
  color: white !important;
  padding: 3px 12px;
  border-radius: 20px;
  font-weight: 800;
  text-transform: uppercase;
  font-size: 0.65rem;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}


.blog-card-image {
  width: 30%;
  object-fit: cover;
  background: #eee;
}

/* --- BLOG POST / ARTICLE VIEW --- */
.blog-article-container {
  max-width: 800px;
  margin: 40px auto;
  padding: 20px;
  color: #333 !important;
  /* Force dark text for article body */
}

#article-body {
  line-height: 1.8;
}

/* Fix for Markdown headers if they are appearing white */
#article-body h1, #article-body h2, #article-body h3 {
  color: #222 !important;
}

/* --- THE PILLAR CTA BOX --- */
.pillar-cta {
  margin-top: 50px;
  padding: 30px;
  background: #ffffff !important;
  border: 2px solid #eee;
  border-radius: 12px;
  text-align: center;
}

/* Specific Top Borders */
.pillar-cta.vault {
  border-top: 6px solid #4a4e69 !important;
}
.pillar-cta.studio {
  border-top: 6px solid #d4a373 !important;
}
.pillar-cta.loom {
  border-top: 6px solid #84a59d !important;
}

.pillar-cta h3 {
  color: #222 !important;
}

/* THE PEACH BUTTON */
.pillar-cta .bmc-button {
  display: inline-block;
  background-color: #d4a373 !important;
  /* Peach */
  color: #ffffff !important;
  /* White text on peach button */
  padding: 12px 25px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
  margin-top: 15px;
}

/* Mobile Fix */
@media (max-width: 600px) {
  .blog-card {
    flex-direction: column;
    height: auto;
  }
  .blog-card-image {
    width: 100%;
    height: 180px;
  }
}

/* Ensures images inside blog posts don't overflow and look consistent */
#article-body img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 20px auto;
  /* Centers the image with spacing */
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
</file>

<file path="css/contact-form.css">
/* styles for contact form */

#contact-info {
  background-color: var(--downy-grey);
}

#contact-info h3 {
  text-align: center;
}

#contact-form {
  max-width: 600px;
  margin: 0 auto;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
  background-color: #f9f9f9;
}

#contact-form h3 {
  text-align: center;
}

#contact-form label {
  font-weight: bold;
}

#contact-form input,
#contact-form textarea {
  width: 100%;
  padding: 10px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
}

#contact-form button {
  padding: 10px 15px;
  border: none;
  background-color: #28a745;
  color: white;
  cursor: pointer;
  border-radius: 4px;
}

#contact-form button:hover {
  background-color: #218838;
}
</file>

<file path="data/articles.json">
[{
  "id": "waistcoat-stitch",
  "title": "Mastering the Waistcoat Stitch",
  "summary": "Learn how to create a beautiful knit-look texture with your crochet hook.",
  "pillar": "Maker's Studio",
  "date": "2026-02-07",
  "image": "../images/gallery-project-basket.jpg",
  "file": "../articles/waistcoat-stitch.md"
}]
</file>

<file path="js/loadBlogPost.js">
document.addEventListener("DOMContentLoaded", function () {
    const params = new URLSearchParams(window.location.search);
    const postId = params.get('id');

    if (!postId) {
        document.getElementById('article-title').textContent = "No Article ID provided in URL.";
        return;
    }

    let attempts = 0;
    function checkLibrary() {
        if (typeof marked !== 'undefined') {
            console.log("Marked.js found!");
            fetchArticleData(postId);
        } else if (attempts < 50) { // Try for 5 seconds total
            attempts++;
            setTimeout(checkLibrary, 100);
        } else {
            document.getElementById('article-title').textContent = "Error: Markdown library failed to load.";
        }
    }

    checkLibrary();
});

function fetchArticleData(postId) {
    // Correctly locate articles.json from /pages/blog-post.html
    const dataPath = '../data/articles.json'; 

    fetch(dataPath)
        .then(res => {
            if (!res.ok) throw new Error("Could not load articles.json");
            return res.json();
        })
        .then(articles => {
            const article = articles.find(a => a.id === postId);
            if (article) {
                renderPost(article);
            } else {
                document.getElementById('article-title').textContent = "Article ID not found.";
            }
        })
        .catch(err => {
            console.error(err);
            document.getElementById('article-title').textContent = "Error loading metadata.";
        });
}

function renderPost(article) {
    const titleEl = document.getElementById('article-title');
    
    // Create and inject the Nest Tag before the title
    const nestLabel = article.pillar || "The Maker's Studio";
    const pillarTag = document.createElement('span');
    pillarTag.className = 'blog-pillar-tag';
    pillarTag.style.display = 'block'; // Ensure it sits above the title
    pillarTag.style.marginBottom = '10px';
    pillarTag.textContent = nestLabel;
    
    titleEl.parentNode.insertBefore(pillarTag, titleEl);
    titleEl.textContent = article.title;

    fetch(article.file)
        .then(res => {
            if (!res.ok) throw new Error("Could not find Markdown file");
            return res.text();
        })
        .then(text => {
            document.getElementById('article-body').innerHTML = marked.parse(text);
            injectCTA(article.pillar);
        })
        .catch(err => {
            document.getElementById('article-body').innerHTML = `<p style="color:red">${err.message}</p>`;
        });
}

function injectCTA(pillar) {
    const container = document.getElementById('dynamic-cta-container');
    
    const ctas = {
        "The Collector's Vault": { text: "Shop the Collection", link: "gallery.html", class: "vault" },
        "The Maker's Studio": { text: "Get the Pattern", link: "tools.html", class: "studio" },
        "The Strategist's Loom": { text: "Download the Blueprint", link: "contact-form.html", class: "loom" }
    };

    // Fallback if pillar name doesn't match perfectly
    const choice = ctas[pillar] || { text: "Back to Blog", link: "blog.html", class: "" };
    
    // REPLACE your old container.innerHTML with this:
    container.innerHTML = `
        <div class="pillar-cta ${choice.class}">
            <h3>Inspired by ${pillar}?</h3>
            <a href="${choice.link}" class="bmc-button">${choice.text}</a>
        </div>
    `;
}
</file>

<file path="js/loadHead.js">
document.addEventListener("DOMContentLoaded", function () {
  const head = document.getElementsByTagName("head")[0];
  const isSubpage = window.location.pathname.includes('/pages/');
  const path = isSubpage ? '../components/head.html' : 'components/head.html';

  fetch(path)
    .then(response => {
      if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
      return response.text();
    })
    .then(data => {
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = data;

      [...tempDiv.children].forEach(el => head.appendChild(el));
    })
    .catch(error => {
      console.error('Error loading head:', error);
    });
});
</file>

<file path="misc/improvements-checklist.md">
# TheYarnMagpie Site Code Quality Improvement Checklist

This checklist is organized by area (HTML, CSS, JS, Accessibility, Performance, etc.) and by file/component where appropriate.  
Check off each item as you address it.

---

## 1. General HTML

- [ ] Validate all HTML files for syntax errors and semantic correctness.
- [ ] Ensure all images have meaningful `alt` text (from JSON where dynamic).
- [x] Use semantic elements (`<nav>`, `<main>`, `<header>`, `<section>`, `<article>`, etc.).
- [ ] Ensure every page has a unique `<title>` and `<meta description>`.
- [ ] Avoid duplicate IDs, especially when cloning templates.
- [ ] Confirm all forms have properly associated `<label>`s.
- [ ] Ensure all links and buttons are keyboard accessible.

---

## 2. Components

### `components/gallery-detail-card.html`
- [ ] Use `<template>` tag if not already used.
- [ ] Ensure placeholders for alt text, title, description, etc., are filled dynamically.
- [ ] No duplicate IDs in template structure.

### `components/head.html` & `header.html`
- [x] All required meta tags present (charset, viewport, etc.).
- [x] Navigation uses `<nav>`, with logical and accessible structure.
- [ ] Keyboard navigation and skip-to-content link available.

---

## 3. CSS

- [ ] Use a consistent naming convention (consider BEM or similar).
- [ ] Remove any unused or duplicate styles.
- [ ] Use CSS custom properties for shared colors in `colors.css`.
- [ ] Ensure all color combinations meet WCAG contrast standards.
- [ ] Add/verify responsive breakpoints for all layouts (`@media` queries).
- [ ] Check for touch targets and spacing for mobile usability.
- [ ] Consider combining and minifying CSS for production.

---

## 4. JavaScript

### `js/loadGallery.js`
- [ ] Use `fetch` with async/await for clarity and error handling.
- [ ] Validate and sanitize all data from `gallery.json` before injecting into DOM.
- [ ] Show loading state while fetching gallery data.
- [ ] Show user-friendly error message if gallery fails to load.
- [ ] Ensure alt text and captions are set from JSON.
- [ ] Lazy-load images for performance (e.g., `loading="lazy"`).

### `js/loadHead.js` & `loadHeader.js`
- [ ] Inject components before visible content to avoid FOUC.
- [ ] Error handling for component loading failures.
- [ ] Ensure navigation remains accessible after dynamic injection.

---

## 5. Data

### `data/gallery.json`
- [ ] Validate JSON (no syntax errors, well-structured).
- [ ] All items include: image path, alt text, title, description (and tags/categories, if used).
- [ ] Descriptive property names.
- [ ] Consider fields for sort order, tags, or categories if filtering will be added.

---

## 6. Accessibility

- [ ] All images have descriptive alt text.
- [ ] Color contrast meets WCAG AA minimums.
- [ ] All interactive elements are reachable and usable via keyboard.
- [ ] Forms are fully accessible (labels, error messages, etc.).
- [ ] Use ARIA attributes where appropriate.

---

## 7. Performance

- [ ] Optimize all images for web (compression, correct sizing).
- [ ] Defer loading of non-critical JS.
- [ ] Lazy-load images in gallery.
- [ ] Minify CSS and JavaScript for production.

---

## 8. SEO

- [ ] Ensure each page has a unique, descriptive `<title>` and `<meta description>`.
- [ ] Use semantic HTML and heading hierarchy.
- [ ] Use descriptive filenames for images and assets.

---

## 9. User Experience

- [ ] Show loading indicators for dynamic content.
- [ ] Display friendly error messages on failures.
- [ ] Ensure consistent layout and navigation across all pages.
- [ ] Test all layouts on mobile, tablet, and desktop.
- [ ] Provide feedback on form submissions.

---

## 10. Maintainability

- [ ] Comment complex code sections.
- [ ] Keep components and styles modular.
- [ ] Document how to add new gallery items via JSON.

---

**Tip:**  
Review each checklist item after relevant file changes. This will help maintain high code quality across your project.

- [ ] Overlay Accessibility
The overlay does not currently trap focus or respond to "Esc" key to close. Consider adding accessibility improvements in the future.
</file>

<file path="js/loadBlogList.js">
/* js/loadBlogList.js */
document.addEventListener("DOMContentLoaded", function () {
    const container = document.getElementById('blog-list-container');
    if (!container) return;

    const isSubpage = window.location.pathname.includes('/pages/');
    const dataPath = isSubpage ? '../data/articles.json' : 'data/articles.json';

    fetch(dataPath)
        .then(response => response.json())
        .then(articles => {
            if (articles.length === 0) {
                container.innerHTML = "<p>New articles coming soon!</p>";
                return;
            }

            container.innerHTML = ''; // Clear container

            articles.forEach(article => {
                const card = document.createElement('a');
                card.className = 'blog-card';
                card.href = `blog-post.html?id=${article.id}`;
                card.target = "_blank"; 

                // We use the 'pillar' field for the Nest Tag
                const nestLabel = article.pillar || "The Maker's Studio";

                card.innerHTML = `
                    <img src="${article.image}" alt="${article.title}" class="blog-card-image">
                    <div class="blog-card-content">
                        <span class="blog-pillar-tag">${nestLabel}</span>
                        <h3>${article.title}</h3>
                        <p>${article.summary}</p>
                    </div>
                `;
                container.appendChild(card);
            });
            
            // --- PILLAR FILTER INTEGRATION START ---
            // This runs after all 'blog-card' elements are appended to the DOM
            if (typeof initPillarFilters === 'function') {
                initPillarFilters('blog-list-container', 'blog-card');
            }
            // --- PILLAR FILTER INTEGRATION END ---
            
        })
        .catch(err => {
            console.error("Error loading blog list:", err);
            container.innerHTML = "<p>Unable to load articles at this time.</p>";
        });
});
</file>

<file path="pages/about.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <title>About | TheYarnMagpie</title>
  <script src="../js/loadHead.js"></script>
</head>

<body>
  <div id="header-placeholder"></div>
  
  <main class="about-content">
    <section class="about-page-section">
      <div>
        <h2>About Me</h2>
        <p>Hi! I'm TheYarnMagpie, a passionate crochet artist who loves turning yarn into magic. This space is where I share my creations, patterns, and stories behind the stitches.</p>
        <p>From cozy mittens to whimsical accessories, I strive to create crochet that's beautiful, practical, and a little bit quirky.</p>
        <p>Crochet is my passion since 2012, when I picked up a hook for the first time during vacations and made my first chains. Since then, I have made many projects using many kinds of stitches, from the simple basics up to intricate designs and lacework.</p>
        <p>Established in Sept. 2024, TheYarnMagpie is my creative corner for crochet enthusiasts, yarnaddicts and accessory shoppers alike - from crochet tutorials over patterns, tips and tricks, all the way to finished items for purchase, you will find a lot of interesting content on my site.</p>
        <p>Thanks for stopping by!</p>
      </div>
    </section>
  </main>
  
  <script src="../js/loadHeader.js"></script>
</body>
</file>

<file path="pages/blog.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Blog | TheYarnMagpie</title>
  <link rel="stylesheet" href="../css/blog.css">
  <link rel="stylesheet" href="../css/nest-filter.css">
  <script src="../js/loadHead.js"></script>
</head>
<body>
  <div id="header-placeholder"></div>

  <main>

    <div id="pillar-filter-placeholder"></div>

    <section class="blog-intro">
      <h2>The Loom: Articles & Insights</h2>
      <p>
        Exploring the intersections of crochet, creativity, and business strategy.
      </p>
    </section>

    <div id="blog-list-container"></div>
  </main>

  <script src="../js/loadHeader.js"></script>
  <script src="../js/pillarFilter.js"></script>
  <script src="../js/loadBlogList.js"></script>
</body>
</html>
</file>

<file path="css/gallery-styles.css">
/* css/gallery.css */

#gallery-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 25px;
    padding: 20px 0;
}

.gallery-card-wrapper {
    position: relative;
    width: 100%;
}

.gallery-item {
    position: relative; /* Context for the Nest Tag */
    background: var(--feather-white);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid var(--downy-grey);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    height: 100%;
}

.gallery-item:hover {
    transform: translateY(-8px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    border-color: var(--tail-green);
}

.gallery-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    display: block;
}

.gallery-info {
    padding: 15px;
}

.gallery-info h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--feather-black);
}

/* --- Nest Taxonomy Badge --- */
.nest-tag {
    position: absolute;
    top: 12px;
    left: 12px;
    background-color: var(--tail-green);
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.65rem;
    font-weight: 800;
    text-transform: uppercase;
    z-index: 5;
    letter-spacing: 0.5px;
    pointer-events: none;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
</file>

<file path="css/tools.css">
/* css/tools.css */

/* 1. Grid Layout */
#tools-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  padding: 2rem 0;
}

/* 2. Tool Card Styling */
.tool-card {
  position: relative; /* Context for Nest Tag */
  background: var(--feather-white);
  border: 1px solid var(--downy-grey);
  border-radius: 15px;
  padding: 2.5rem 1.5rem;
  text-align: center;
  box-shadow: 0 4px 6px rgba(0,0,0,0.05);
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
  
  /* Prevents subtle text shaking on transform */
  backface-visibility: hidden;
  -webkit-font-smoothing: subpixel-antialiased;
}

/* 3. Interaction States */
.tool-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.1);
  border-color: var(--tail-green);
}

/* 4. Content Elements */
.tool-icon {
  font-size: 3.5rem;
  margin-bottom: 1rem;
  display: block;
}

.tool-card h3 {
  margin: 0.5rem 0;
  color: var(--feather-black);
  font-size: 1.25rem;
}

.tool-card p {
  color: var(--coal-dust);
  font-size: 0.9rem;
  line-height: 1.4;
  margin: 0;
}

/* 5. Nest Tag (The Pillar) */
.nest-tag {
  position: absolute;
  top: 12px;
  left: 12px;
  background: var(--tail-green);
  color: white;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.65rem;
  font-weight: 800;
  text-transform: uppercase;
  z-index: 5;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* 6. Click Stability Fixes */
.tool-card * {
  pointer-events: none; /* Ensures the whole card acts as one button */
}

/* Remove button styles if you are using the whole-card click method */
.btn-open-tool {
  display: none; 
}

.tool-card {
    /* ... existing styles ... */
    transform-origin: center center;
    backface-visibility: hidden;
    will-change: transform; /* Tells browser to optimize for movement */
}

/* Ensure the overlay covers the whole screen since it's now in the body */
.details-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.details-overlay.active {
    display: flex;
}
</file>

<file path="data/tools.json">
[
  {
    "id": "hook-size-calc",
    "title": "Hook Size Calculator",
    "pillar": "Maker's Studio",
    "category": "Essentials",
    "description": "Convert hook sizes.",
    "longDescription": "Full conversion table for US, UK, and Metric.",
    "icon": "üìè"
  },
  {
    "id": "yarn-sub-tool",
    "title": "Yarn Substitutor",
    "pillar": "Strategist's Loom",
    "category": "Planning",
    "description": "Calculate yardage for different weights.",
    "longDescription": "Estimate how much yarn you need when changing weights.",
    "icon": "üß∂"
  }
]
</file>

<file path="js/loadHeader.js">
document.addEventListener("DOMContentLoaded", function () {
  const headerPlaceholder = document.getElementById('header-placeholder');
  if (!headerPlaceholder) return;

  // Determine the correct path to header.html based on the current page's location
  const path = window.location.pathname.includes('/pages/') ? '../components/header.html' : 'components/header.html';

const basePath = window.location.pathname.includes('/TheYarnMagpie/') 
  ? '/TheYarnMagpie/' 
  : '/';

const head = document.head;

['css/styles.css', 'css/gallery-styles.css', 'css/about.css', 'css/tools.css', 'css/contact-form.css', 'css/header.css'].forEach(file => {
  const link = document.createElement('link');
  link.rel = 'stylesheet';
  link.href = basePath + file;
  head.appendChild(link);
});

// Optional: add the font link too
const font = document.createElement('link');
font.rel = 'stylesheet';
font.href = 'https://fonts.googleapis.com/css2?family=Gwendolyn&display=swap';
head.appendChild(font);

  fetch(path)
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      return response.text();
    })
    .then(data => {
      headerPlaceholder.innerHTML = data;

      // Adjust all data-href links to work with current base path
      const basePath = window.location.pathname.includes('/TheYarnMagpie/') ? '/TheYarnMagpie/' : '/';
      document.querySelectorAll('a[data-href]').forEach(link => {
        const dataHref = link.getAttribute('data-href') || '';

        // Basic hardening: ignore empty values and disallow dangerous URL schemes
        const trimmed = dataHref.trim();
        if (!trimmed) {
          return;
        }
        const lower = trimmed.toLowerCase();
        if (lower.startsWith('javascript:') || lower.startsWith('data:') || lower.startsWith('vbscript:')) {
          return;
        }

        // Build a safe URL relative to the current origin and basePath
        let safePath = trimmed;
        if (safePath.startsWith('/')) {
          safePath = safePath.substring(1);
        }

        try {
          const url = new URL(basePath + safePath, window.location.origin);
          // Ensure we stay on the same origin
          if (url.origin === window.location.origin) {
            link.href = url.toString();
          }
        } catch (e) {
          // If constructing the URL fails, leave the link unchanged
        }
      });
    })
    .catch(error => {
      console.error('Error loading header:', error);
    });
});
</file>

<file path="components/gallery-detail-card.html">
<div id="galleryDetailOverlay" class="details-overlay">
    <div class="gallery-detail-card">
        <button id="closeGalleryDetailBtn" class="close-detail">&times;</button>
        
        <span id="galleryDetailPillar"></span>
        <h2 id="galleryDetailTitle"></h2>
        
        <img id="galleryDetailImage" src="" alt="Project Detail">
        
        <p id="galleryDetailDescription"></p>
        
        <div class="tags-container">
            <ul id="galleryDetailTags"></ul>
        </div>
    </div>
</div>
</file>

<file path="pages/tools.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tools | TheYarnMagpie</title>
  <script src="../js/loadHead.js"></script>
  <link rel="stylesheet" href="../css/tools.css">
  <link rel="stylesheet" href="../css/tool-detail-card.css">
  <link rel="stylesheet" href="../css/nest-filter.css">
</head>
<body>
  <div id="header-placeholder"></div>
    <div id="pillar-filter-placeholder"></div>

  <main class="wrapper">
    
    
    <header class="section-header">
      <h2>The Workshop</h2>
      <p>
        Practical tools for the modern crocheter.
      </p>
    </header>

    
    <div id="tools-container" class="tools-grid">
      <p>
        Loading tools...
      </p>
    </div>
  </main>

  <script src="../js/loadHeader.js"></script>
  <script src="../js/pillarFilter.js"></script>
  <script src="../js/loadTools.js"></script>
</body>
</html>
</file>

<file path="components/header.html">
<header>
  <div class="header-container">
    <div class="brand">
      <img src="/TheYarnMagpie/images/magpie-yarn.png" alt="magpie with a yarn ball" class="magpie-yarn">
        <h1>TheYarnMagpie</h1>
      </div>
      <p class="tagline">creative crochet designs & handmade magic</p>
   
    <!-- Navigation Bar -->
    <nav>      
        <ul>
            <li><a data-href="index.html">Home</a></li>
            <li><a data-href="pages/about.html">About</a></li>
            <li><a data-href="pages/gallery.html">Gallery</a></li>
            <li><a data-href="pages/blog.html">Blog</a></li>
            <li><a data-href="pages/tools.html">Tools</a></li>
            <li><a data-href="pages/contact-form.html">Contact</a></li>
        </ul>
    </nav>
  </div>
</header>
</file>

<file path="css/gallery-details-card.css">
/* css/gallery-detail-card.css */

/* Gallery Detail Overlay */
#galleryDetailOverlay {
  position: fixed;
  /* Ensures it stays in the center even if you've scrolled down */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  display: none;
  /* Controlled by .active class */
  justify-content: center;
  align-items: center;
  z-index: 10000;
  /* High number to stay above navbar/list */
}

#galleryDetailOverlay.active {
  display: flex;
}

/* 1. Modal Container */
.gallery-detail-card {
  background: var(--feather-white);
  max-width: 500px;
  /* Constrains the overall width on desktop */
  width: 90%;
  max-height: 85vh;
  border-radius: 20px;
  position: relative;
  padding: 30px;
  overflow-y: auto;
  color: var(--feather-black);
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* 2. The Big Image Fix */
#galleryDetailImage {
  width: 100%;
  height: 300px;
  /* Fixed height for consistency */
  object-fit: cover;
  /* Prevents stretching */
  border-radius: 12px;
  border: 1px solid var(--downy-grey);
}

/* 3. The Nest Tag (Pillar) */
#galleryDetailPillar {
  align-self: flex-start;
  background-color: var(--tail-green);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* 4. Detail Tags (Stitches, Materials) */
#galleryDetailTags {
  list-style: none;
  padding: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

#galleryDetailTags li {
  background: var(--downy-grey);
  color: var(--coal-dust);
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
}

/* 5. Typography */
#galleryDetailTitle {
  margin: 0;
  font-size: 1.5rem;
}

#galleryDetailDescription {
  font-size: 0.95rem;
  line-height: 1.5;
  color: var(--coal-dust);
}

.close-detail {
  position: absolute;
  top: 15px;
  right: 15px;
  background: none;
  border: none;
  font-size: 1.8rem;
  cursor: pointer;
  color: var(--coal-dust);
  z-index: 10;
}
</file>

<file path="data/gallery.json">
[
  {
    "image": "../images/gallery-project-basket.jpg",
    "title": "TL Yarncrafts CAL Basket",
    "pillar": "Maker's Studio",
    "description": "A useful stash basket worked in the round with bulky yarn held in two strands, using the waistcoat stitch",
    "tags": [
      "home decor",
      "waistcoat stitch",
      "bulky acrylic"
    ]
  },
  {
    "image": "../images/flower-mandala-earrings.jpg",
    "title": "Flower Mandala Earrings",
    "pillar": "Collector's Vault",
    "description": "Crocheted earrings with 7-petal flowers, reinforced with wire, and a small bead at the tip of each petal.",
    "tags": [
      "jewelry",
      "bead crochet",
      "fine yarn/lace"
    ]
  },
  {
    "image": "../images/hyperbolic-coral-charm.jpg",
    "title": "Hyperbolic Plane Coral ball charm",
    "pillar": "Collector's Vault",
    "description": "Started as a round, disc-shaped ring and increasing stitches exponentially, this coral-like shape proves that hyperbolic planes (surfaces with negative curvature) can actually be physically created - with crochet!",
    "tags": [
      "accessories",
      "geometry crochet",
      "fine cotton"
    ]
  }
]
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Home | TheYarnMagpie</title>
  <script src="js/loadHead.js"></script>
</head>

<body>
    
    <div id="header-placeholder"></div>

    <main>
        <section id="site-intro">
            <h2>Yarnaddicts, welcome!</h2>
            <p>If you like to crochet, love yarny things and fiber arts in general, you have landed on the right site...</p>
        </section>

        <section id="about">
            <h2>About The Yarn Magpie</h2>
            <p>Hi, I'm Helen, the yarn-loving creator behind TheYarnMagpie. I specialize in crafting unique crochet designs, sharing tips and tricks, and celebrating the joy of handmade creations. Whether you're a fellow maker or just yarn-curious, you're most welcome here!</p>
            <a class="more-about-link" href="pages/about.html">More About TheYarnMagpie</a>
        </section>

        <section id="featured-project">
            <h2>Featured Project</h2>
            <p><strong>Montego Shawl</strong></p>
            <p>Worked in a triangle corner-to-corner, this shawl is designed to keep you cozy and stylish in the cooler spring or autumn evenings. Perfect for yarn enthusiasts looking for a mindless project that works up quickly.</p>
            
            <img class="feature-img" src="images/featured-project-shawl.jpg" alt="Spring Shawl">
        </section>

        <section id="site-overview">
            <h2>What You'll Find Here</h2>
            <ul>
                <li>Original crochet patterns (free and paid)</li>
                <li>Tips and tutorials for all skill levels</li>
                <li>Gallery showcasing finished projects</li>
                <li>Links to my social media and online shop</li>
                <li>Updates and musings on the crochet journey</li>
            </ul>
        </section>

        <section id="call-to-action">
            <h2>Join the Yarn Journey</h2>
            <p>Explore the <a href="pages/gallery.html">Gallery</a> to see my latest creations, follow me on <a href="https://www.instagram.com/theyarnmagpie">Instagram</a> for daily updates, or support my work through <a href="buymeacoffee.com/theyarnmagpie">Buy Me a Coffee</a>. Your support keeps the yarn flowing!</p>
        </section>

        <section id="inspiration">
            <h2>Yarn Thoughts</h2>
            <blockquote>
                "Crochet is like painting with yarn. I love combining color, texture, and technique to create cozy little bits of magic."
            </blockquote>
        </section>

        <section id="social-section">
            <h2>Follow Me on Social Media</h2>
            <div class="social-icons">
                <a href="https://www.instagram.com/theyarnmagpie" class="social-icons instagram" target="_blank">üì∑ Instagram</a>
                <a href="https://www.youtube.com/@theyarnmagpie" class="social-icons youtube" target="_blank">‚ñ∂ YouTube</a>
                <a href="https://www.tiktok.com/@theyarnmagpie" class="social-icons tiktok" target="_blank">üéµ TikTok</a>
                <a href="https://www.threads.net/@theyarnmagpie" class="social-icons threads" target="_blank">Threads</a>
            </div>
        </section>

        <section class="buy-coffee">
            <h2>Support My Crochet Creations</h2>
            <p>If you enjoy my work, consider buying me a coffee!</p>
    
            <!-- Buy Me a Coffee Button -->
            <a href="https://www.buymeacoffee.com/theyarnmagpie" class="bmc-button" target="_blank">‚òï Buy Me a Coffee</a>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 TheYarnMagpie</p>
    </footer>

    <script src="./js/loadHeader.js"></script>

</body>
</html>
</file>

<file path="css/styles.css">
body, html {
   flex-direction: column;
    width: 100vw;
    margin: 0;
    padding: 0;
    background-color: var(--mid-feather-grey)
}

main {
    margin: 0;
}

a {
  color: var(--wing-blue);
  text-decoration: none;
  font-weight: bold;
}

a:hover {
  color: var(--violet-sheen);
  text-decoration: underline;
  font-weight: bold;
}

/* Sections of main page */
section {
    margin: 1rem;
    padding: 1.5rem;
    background-color: #2C2C2E;
    border-radius: 12px;
    box-shadow: 0 2px 6px 0 #C8A146;
}

section h2 {
    font-family: "Cormorant Upright", serif;
    font-weight: 600;
    font-style: normal;
    font-size: 2rem;
    margin-bottom: 0.8rem;
    color: var(--feather-white);
    border-bottom: 3px solid var(--copper-gleam);
    padding-bottom: 0.3rem;
}

section p {
    font-size: 1.6rem;
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    color: #F5F5F5;
}

section ul li {
    padding: 0 0 0 5px;
    font-size: 1.8rem;
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    color: #F5F5F5;
}

blockquote {
    font-style: italic;
    font-size: 1.5rem;
    padding: 1rem;
    margin: 1rem 0;
    border-left: 4px solid var(--copper-gleam);
    color: var(--tail-green)
}

.more-about-link {
  font-style: italic;
  font-weight: normal;
}

.feature-img {
  height: 400px;
  display: flex;
  justify-content: center;
}

/* Social pages links section  */
#social-section {
    text-align: center;
}

/* Social Media Buttons */

.social-icons {
    display: flex;
    flex-wrap: wrap;  /* Allows buttons to break into new rows */
    flex-direction: column;  /* Stacks items vertically first */
    justify-content: space-beteen;
    align-items: center; /* Centers content horizontally */
    gap: 10px; /* Spacing between buttons */
    height: 120px; /* Adjust based on button size */
    max-width: 200px; /* Prevents excessive stretching */
}

.social-icons a {
    width: 45%; /* Two buttons per row */
    text-align: center;
    padding: 10px;
    border-radius: 20px;
    text-decoration: none;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Platform-Specific Colors */
.instagram { background-color: #E4405F; }
.youtube { background-color: #FF0000; }
.tiktok { background-color: #000000; }
.threads { background-color: #1DA1F2; }

.bmc-button {
    display: inline-block;
    background-color: var(--wing-blue);
    color: var(--feather-white);
    border: none;
    padding: 5px 10px 5px 10px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    margin: 10px;
    text-decoration: none;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
    transition: background-color 0.3s ease-in-out;
}

.bmc-button:hover {
    background-color: var(--violet-sheen);
}
</file>

<file path="js/loadTools.js">
/* js/loadTools.js - Full File Replacement */

async function loadTools() {
  const container = document.getElementById('tools-container');
  if (!container) return;

  try {
    const response = await fetch('../data/tools.json');
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

    const toolsData = await response.json();
    container.innerHTML = '';

    toolsData.forEach(tool => {
      const card = document.createElement('div');
      card.className = 'tool-card';
      const nestLabel = tool.pillar || "Maker's Studio";

      card.innerHTML = `
      <span class="nest-tag">${nestLabel}</span>
      <div class="tool-icon">${tool.icon || 'üõ†Ô∏è'}</div>
      <h3>${tool.title}</h3>
      <p>${tool.description}</p>
      `;

      card.addEventListener('click', (e) => {
        e.preventDefault();
        openToolDetail(tool);
      });
      container.appendChild(card);
    });

    // Initialize f
    if (typeof initPillarFilters === 'function') {
      initPillarFilters('tools-container', 'tool-card');
    }


  } catch (error) {
    console.error('Tools Load Error:', error);
  }
}

async function openToolDetail(tool) {
  try {
    // 1. Fetch the singular file
    const res = await fetch('../components/tool-detail-card.html');
    if (!res.ok) throw new Error("Template not found");
    const template = await res.text();

    const existing = document.getElementById('toolDetailOverlay');
    if (existing) existing.remove();

    // 2. Inject into body
    document.body.insertAdjacentHTML('beforeend', template);
    const overlay = document.getElementById('toolDetailOverlay');

    // 3. Populate with extra safety checks
    const safeSetText = (id, text) => {
      const el = document.getElementById(id);
      if (el) el.textContent = text || "";
    };

    safeSetText('toolDetailTitle', tool.title);
    safeSetText('toolDetailDescription', tool.description);
    safeSetText('toolDetailPillar', tool.pillar);
    safeSetText('toolDetailLongDescription', tool.longDescription);

    // 4. Show
    setTimeout(() => overlay.classList.add('active'), 10);
  } catch (error) {
    console.error('Error opening tool detail:', error);
  }
}

// Global Close
document.addEventListener('click', (e) => {
  const overlay = document.getElementById('toolDetailOverlay');
  if (!overlay) return;
  const isClose = e.target.id === 'closeToolDetailBtn' || e.target.closest('.close-detail') || e.target === overlay;
  if (isClose) {
    overlay.classList.remove('active');
    setTimeout(() => overlay.remove(), 300);
  }
});

loadTools();
</file>

<file path="pages/contact-form.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Contact | TheYarnMagpie</title>
  <script src="../js/loadHead.js"></script>
</head>
<body>

  <div id="header-placeholder"></div>
  
  <main>
  <section>  
    <div>
      <h2>Contact TheYarnMagpie</h2>
      <p>Have any questions or want to collaborate? Drop a message below!</p>
    </div>

    <div id="contact-info">
      <h3>Contact Information</h3>
      <p>Email: <a href="mailto:theyarnmagpie.crochet@gmail.com">theyarnmagpie.crochet@gmail.com</a></p>
      <p>Follow me on social media for updates and more!</p>
      <!-- Add social media links here -->
    </div>

    <div id="contact-form">
      <h3>Send a Message</h3>
      
<iframe
  src="https://theyarnmagpie.fillout.com/contact"
  width="100%"
  height="800"
  style="border: none;">
</iframe>
      
      <!--
      <form action="https://formspree.io/f/xldnbenv" method="POST">
        <label for="name">Your Name</label>
        <input type="text" id="name" name="name" required>

         Inquiry Type dropdown 
        <label for="inquiry">Inquiry Type:</label>
        <select id="inquiry" name="inquiry" required>
          <option value="">--Please choose an option--</option>
          <option value="General Question">General Question</option>
          <option value="Custom Order">Custom Order</option>
          <option value="Feedback">Feedback</option>
          <option value="Other">Other</option>
        </select>

        <label for="email">Your Email</label>
        <input type="email" id="email" name="email" required>

        <label for="message">Your Message</label>
        <textarea id="message" name="message" rows="5" required></textarea>

        <button type="submit">Send Message</button>
      </form>
      -->
    </div>
    </section>
  </main>
  <script src="../js/loadHeader.js"></script>
</body>
</html>
</file>

<file path="components/head.html">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Support My Crochet</title>
<link href="https://fonts.googleapis.com/css2?family=Gwendolyn:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Upright:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="../css/colors.css">
<link rel="stylesheet" href="../css/styles.css">  <!-- for pages in /pages/ -->
<link rel="stylesheet" href="../css/styles.css">     <!-- for index.html in root -->
<link rel="stylesheet" href="../css/header.css">  <!-- Link to header styles -->
<link rel="stylesheet" href="../css/gallery-styles.css">
<link rel="stylesheet" href="/css/gallery-details-card.css">
<link rel="stylesheet" href="/css/tools.css">
<link rel="stylesheet" href="/css/tools-details-card.css">
<link rel="stylesheet" href="../css/contact-form.css">

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="/js/loadHead.js"></script>
</file>

<file path="css/header.css">
header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background-color: #2C2C2E;
    border-bottom: 2px solid #C8A146;
}

.header-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

.brand {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 2px;
}

.brand .magpie-yarn {
  height: 150px; /* Adjust as needed */
  width: auto;
}

.brand h1 {
  margin: 0;
  padding: 0.25rem 0;
  font-size: 72px;
  color: var(--feather-white);
  text-align: center;
  font-family: "Gwendolyn", cursive;
}

.header-container .tagline {
  margin: 0.2em 0 0.2em 0;
  font-size: 16px;
  font-family: 'Arial', sans-serif;
  font-weight: bold;
  color: var(--tail-green);
  text-shadow: 0.5px 0.5px var(--feather-white);
  text-align: center;
}

/* Navigation Bar */
nav {
    background: #3E3E41;
    box-shadow: 0 4px 6px 0 #C8A146;
    width: 100%;
}

nav ul {
    list-style: none;
    display: flex;
    justify-content: center;
    padding: 0;
    margin: 0;
}

nav ul li a {
    display: block;
    padding: 1em 2em;
    color: var(--wing-blue);
    text-shadow: 2px 2px var(--feather-white)
    text-decoration: none;
    font-weight: bold;
    font-size: 1rem;
    text-align: space-between;
}
</file>

<file path="js/loadGallery.js">
/* js/loadGallery.js */
// 1. Data Fetching and Card Rendering Logic

async function loadGallery() {
  const container = document.getElementById('gallery-container');
  if (!container) return;

  try {
    const response = await fetch('../data/gallery.json');
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

    const galleryData = await response.json();
    container.innerHTML = '';

    galleryData.forEach(item => {
      const cardWrapper = document.createElement('div');
      cardWrapper.className = 'gallery-card-wrapper';

      const nestLabel = item.pillar || "Collector's Vault";

      cardWrapper.innerHTML = `
      <div class="gallery-item">
      <span class="nest-tag">${nestLabel}</span>
      <img src="${item.image}" alt="${item.title}" onerror="this.src='../assets/placeholder.jpg'">
      <div class="gallery-info">
      <h3>${item.title}</h3>
      </div>
      </div>
      `;

      const itemElement = cardWrapper.querySelector('.gallery-item');
      itemElement.addEventListener('click', (e) => {
        e.preventDefault();
        openGalleryDetail(item);
      });

      container.appendChild(cardWrapper);
    });

    // --- PILLAR FILTER INTEGRATION START ---
    // We call this ONLY after the loop above is finished
    if (typeof initPillarFilters === 'function') {
      await initPillarFilters('gallery-container', 'gallery-card-wrapper');
    }
    // --- PILLAR FILTER INTEGRATION END ---

  } catch (error) {
    console.error('Gallery Load Error:', error);
    container.innerHTML = `<p style="text-align:center; padding: 20px; color: var(--burnished-copper);">The Magpie encountered an error in the Gallery data.</p>`;
  }
}

// 2. Detail Modal Logic (Gallery Fix Architecture)
async function openGalleryDetail(item) {
  try {
    const templateRes = await fetch('../components/gallery-detail-card.html');
    const template = await templateRes.text();

    // 1. Clean up existing overlay to prevent ID conflicts
    const existing = document.getElementById('galleryDetailOverlay');
    if (existing) existing.remove();

    // 2. THE FIX: Inject into Body, not the container
    // This ensures it stays on top and ignores the parent's layout
    document.body.insertAdjacentHTML('beforeend', template);

    const overlay = document.getElementById('galleryDetailOverlay');

    // 3. Populate Data
    document.getElementById('galleryDetailTitle').textContent = item.title;
    document.getElementById('galleryDetailImage').src = item.image;
    document.getElementById('galleryDetailDescription').textContent = item.description;

    const pillarEl = document.getElementById('galleryDetailPillar');
    if (pillarEl) {
      pillarEl.textContent = item.pillar || "Collector's Vault";
    }

    const tagsUl = document.getElementById('galleryDetailTags');
    if (tagsUl && item.tags && Array.isArray(item.tags)) {
      tagsUl.innerHTML = '';
      item.tags.forEach(tag => {
        const li = document.createElement('li');
        li.textContent = tag;
        tagsUl.appendChild(li);
      });
    }

    // 4. Show the overlay
    setTimeout(() => overlay.classList.add('active'), 10);

  } catch (error) {
    console.error('Error opening gallery detail:', error);
  }
}


// 3. Global Closing Logic
document.addEventListener('click', function(e) {
  const overlay = document.getElementById('galleryDetailOverlay');
  if (!overlay) return;

  const isCloseBtn = e.target.id === 'closeGalleryDetailBtn' || e.target.closest('.close-detail');

  if (isCloseBtn || e.target === overlay) {
    overlay.classList.remove('active');
    setTimeout(() => overlay.remove(), 300);
  }
});

loadGallery();
</file>

<file path="pages/gallery.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Crochet Gallery  TheYarnMagpie</title>
    <link rel="stylesheet" href="../css/gallery.css">
<link rel="stylesheet" href="../css/gallery-detail-card.css">
<link rel="stylesheet" href="../css/nest-filter.css">

    <script src="../js/loadHead.js"></script>

</head>

<body>
    <div id="header-placeholder"></div>

    <main>
      
      <div id="pillar-filter-placeholder"></div>
      
      <section>
        <div>
          <h2>TheYarnMagpie Crochet Gallery</h2>
          <p>Take a peek at some of my recent creations!</p>
        </div>

        <div id="gallery-container"></div>

      </section>
    </main>

    <script src="../js/loadHeader.js"></script>
    <script src="../js/pillarFilter.js"></script>
    <script src="../js/loadGallery.js"></script>

</body>
</html>
</file>

</files>
